[package]
name = "readpassphrase-3"
version = "1.0.0-pre.6"
edition = "2021"
rust-version = "1.77.0"
description = "Simple wrapper around readpassphrase(3)"
readme = "README.md"
repository = "https://github.com/mrdomino/readpassphrase-3"
license = "MIT OR Apache-2.0 OR ISC"
keywords = ["getpass", "passphrase", "password", "tty"]
categories = ["command-line-interface"]

exclude = [
    ".githook/*",
    ".github/**",
    ".gitignore",
]

[[example]]
name = "pass"
path = "examples/pass.rs"
doc-scrape-examples = true

[[example]]
name = "inplace"
path = "examples/inplace.rs"

[[example]]
name = "owned"
path = "examples/owned.rs"

[features]
default = ["linux-vendored", "windows-vendored"]
external = []
libbsd-static = []
linux-vendored = ["dep:tcm-readpassphrase-vendored"]
windows-vendored = ["dep:cc"]
zeroize = ["dep:zeroize"]

[dependencies]
bitflags = "2"
zeroize = { version = "1", optional = true }

[target.'cfg(not(any(target_os = "macos", target_os = "windows")))'.dependencies]
tcm-readpassphrase-vendored = { version = "0.2", optional = true }

[target.'cfg(target_os = "windows")'.build-dependencies]
cc = { version = "1", optional = true }

[dev-dependencies]
zeroize = "1"

[package.metadata.docs.rs]
features = ["external", "zeroize"]
# XXX cc is crashing on mac and windows on docs.rs
no-default-features = true
